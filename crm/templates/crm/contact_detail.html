{% extends 'global/base.html' %}

{% block title %}{{ contact.first_name }} {{ contact.last_name }} - Contacts - Oak City Software{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>{{ contact.first_name }} {{ contact.last_name }}</h1>
                <a href="{% url 'crm:contact_list' %}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Contacts
                </a>
            </div>

            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="row">
                <!-- Contact Information Display -->
                <div class="col-md-6">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Contact Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Full Name:</strong></div>
                                <div class="col-sm-8">{{ contact.first_name }} {{ contact.last_name }}</div>
                            </div>
                            
                            {% if contact.email %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Email:</strong></div>
                                <div class="col-sm-8">
                                    <a href="mailto:{{ contact.email }}">{{ contact.email }}</a>
                                </div>
                            </div>
                            {% endif %}
                            
                            {% if contact.phone_number %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Phone:</strong></div>
                                <div class="col-sm-8">
                                    <a href="tel:{{ contact.phone_number }}">{{ contact.phone_number }}</a>
                                </div>
                            </div>
                            {% endif %}
                            
                            {% if contact.organization %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Organization:</strong></div>
                                <div class="col-sm-8">{{ contact.organization }}</div>
                            </div>
                            {% endif %}
                            
                            {% if contact.title %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Title:</strong></div>
                                <div class="col-sm-8">{{ contact.title }}</div>
                            </div>
                            {% endif %}
                            
                            {% if contact.address %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Address:</strong></div>
                                <div class="col-sm-8">{{ contact.address|linebreaks }}</div>
                            </div>
                            {% endif %}
                            
                            {% if contact.notes %}
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Notes:</strong></div>
                                <div class="col-sm-8">{{ contact.notes|linebreaks }}</div>
                            </div>
                            {% endif %}
                            
                            <div class="row mb-3">
                                <div class="col-sm-4"><strong>Created:</strong></div>
                                <div class="col-sm-8">{{ contact.created_at|date:"F d, Y g:i A" }}</div>
                            </div>
                            
                            <div class="row">
                                <div class="col-sm-4"><strong>Updated:</strong></div>
                                <div class="col-sm-8">{{ contact.updated_at|date:"F d, Y g:i A" }}</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Edit Form -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Edit Contact</h5>
                        </div>
                        <div class="card-body">
                            <form method="post">
                                {% csrf_token %}
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name <span class="text-danger">*</span></label>
                                        {{ form.first_name }}
                                        {% if form.first_name.errors %}
                                            <div class="text-danger small">{{ form.first_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name <span class="text-danger">*</span></label>
                                        {{ form.last_name }}
                                        {% if form.last_name.errors %}
                                            <div class="text-danger small">{{ form.last_name.errors.0 }}</div>
                                        {% endif %}
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                        <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.phone_number.id_for_label }}" class="form-label">Phone Number</label>
                                    {{ form.phone_number }}
                                    {% if form.phone_number.errors %}
                                        <div class="text-danger small">{{ form.phone_number.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.organization.id_for_label }}" class="form-label">Organization</label>
                                    {{ form.organization }}
                                    {% if form.organization.errors %}
                                        <div class="text-danger small">{{ form.organization.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.title.id_for_label }}" class="form-label">Title</label>
                                    {{ form.title }}
                                    {% if form.title.errors %}
                                        <div class="text-danger small">{{ form.title.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.address.id_for_label }}" class="form-label">Address</label>
                                    {{ form.address }}
                                    {% if form.address.errors %}
                                        <div class="text-danger small">{{ form.address.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="mb-3">
                                    <label for="{{ form.notes.id_for_label }}" class="form-label">Notes</label>
                                    {{ form.notes }}
                                    {% if form.notes.errors %}
                                        <div class="text-danger small">{{ form.notes.errors.0 }}</div>
                                    {% endif %}
                                </div>

                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Update Contact
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add FontAwesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}